<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Management System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
          /* Hide scrollbar but allow scrolling */
      .scrollbar-hidden::-webkit-scrollbar {
        display: none;
      }

      .scrollbar-hidden {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }

  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <nav class="bg-teal-700 text-white p-2">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold">TaskMan</h1>
      <ul class="flex space-x-5">
        <li><a href="login.html" class="hover:text-gray-300">Login</a></li>
        <li><a href="signup.html" class="hover:text-gray-300">Signup</a></li>
        <li><a href="index.html" class="hover:text-gray-300">Home</a></li>
      </ul>
    </div>
  </nav>
  <main>
    <div class="w-full mx-auto">
      <section class="p-4">
        <h2 class="text-lg font-light mb-4">Pending Tasks</h2>
        <div class="relative">
          <button
          id="scrollLeft"
          class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-200 p-2 rounded-full shadow hover:bg-gray-300"
          style="z-index: 10;"
          >
          &larr;
          </button>
          <!-- Tasks Container -->
          <div
          id="tasks"
          class="flex gap-4 overflow-x-scroll no-scrollbar scrollbar-hidden px-8"
          style="scroll-behavior: smooth;"
          >
          <!-- Task Cards will be injected here -->
          </div>

          <!-- Right Arrow -->
            <button
            id="scrollRight"
            class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-200 p-2 rounded-full shadow hover:bg-gray-300"
            style="z-index: 10;"
          >
            &rarr;
          </button>
        </div>
        
      </section>
      <section class="p-4 mt-8">
        <div class="tabs flex space-x-4">
          <button class="tab bg text-teal-700 font-bold hover:text-white hover:bg-teal-600 py-2 px-4 rounded">Team Members</button>
          <button class="tab bg text-teal-700 font-bold hover:text-white hover:bg-teal-600 py-2 px-4 rounded">Tasks</button>
          <button class="tab bg text-teal-700 font-bold hover:text-white hover:bg-teal-600 py-2 px-4 rounded">Search</button>
        </div>
        <div id="tabContent" class="mt-4">
          <!-- Tab content goes here -->
        </div>
      </section>

    </div>
  </main>





  <script>

    document.addEventListener('DOMContentLoaded', () => {
      const authToken = localStorage.getItem('authToken');
  
      if (!authToken) {
        // Redirect to the login page if the user is not authenticated
        window.location.href = 'login.html';
      }
    })

    async function fetchTasks() {
      const response = await fetch('https://5m8co26l97.execute-api.eu-west-1.amazonaws.com/dev/tasks/', {
        headers: { Authorization: `Bearer ${localStorage.getItem('authToken')}` },
      });
      const data = await response.json();
      const bodyData = JSON.parse(data.body);
      const tasks = bodyData.tasks || [];


      const tasksContainer = document.getElementById('tasks');
      tasksContainer.innerHTML = '';
      tasks.forEach(task => {
        const taskCard = document.createElement('div');
        taskCard.className = 'bg-white shadow p-4 rounded w-64 h-32 shrink-0 overflow-hidden'; // Fixed size
        taskCard.innerHTML = `
          <h3 class="font-bold text-lg truncate">${task.title}</h3>
          <p class="text-sm text-gray-600">Status: ${task.status}</p>
          <p class="text-sm text-gray-600">Assigned to: ${task.assigned_to}</p>
        `;
        tasksContainer.appendChild(taskCard);
      });
    }
    
      // Scroll functionality
    document.getElementById('scrollLeft').addEventListener('click', () => {
      const container = document.getElementById('tasks');
      container.scrollLeft -= 300; // Adjust scroll amount as needed
    });

    document.getElementById('scrollRight').addEventListener('click', () => {
      const container = document.getElementById('tasks');
      container.scrollLeft += 300; // Adjust scroll amount as needed
    });


    fetchTasks();
  </script>
  
</body>
</html>

